--- a/auto/modules/python	2023-03-14 15:40:53.285924404 -0400
+++ b/auto/modules/python	2023-03-14 15:41:01.726039920 -0400
@@ -49,7 +49,7 @@
 fi
 
 . $NXT_AUTOCONF_DATA
-
+echo=echo
 
 NXT_PYTHON_CONFIG=${NXT_PYTHON_CONFIG=python-config}
 NXT_PYTHON=${NXT_PYTHON_CONFIG%-config*}
@@ -106,8 +106,9 @@
 
 
 nxt_feature="Python version"
-nxt_feature_name=""
+nxt_feature_name="NXT_HAVE_PY_VERSION"
 nxt_feature_run=value
+nxt_feature_run_force_result=$PYTHON3_VERSION
 nxt_feature_incs="${NXT_PYTHON_INCLUDE}"
 nxt_feature_libs="${NXT_PYTHON_LIBS} $NXT_PYTHON_LDFLAGS"
 nxt_feature_test="
@@ -132,33 +133,15 @@
 
 NXT_PYTHON_MOUNTS_HEADER=nxt_${NXT_PYTHON_MODULE}_mounts.h
 
-$NXT_PYTHON -c 'import os.path
-import sys
-pyver = "python" + str(sys.version_info[0]) + "." + str(sys.version_info[1])
-
-print("static const nxt_fs_mount_t  nxt_python_mounts[] = {")
-
-pattern = "{(u_char *) \"%s\", (u_char *) \"%s\", NXT_FS_BIND, (u_char *) \"bind\", 0, NULL, 1, 1},"
-base = None
-for p in sys.path:
-    if len(p) > 0:
-        if os.path.basename(p) == pyver:
-            base = p
-
-if base is None:
-    raise Exception("failed to compute sys.path mount points")
-
-print(pattern % (base, base))
-
-for p in sys.path:
-    if len(p) > 0:
-        if not p.startswith(base):
-            print(pattern % (p, p))
-
-print("};\n\n")
+cat << END >> $NXT_BUILD_DIR/$NXT_PYTHON_MOUNTS_HEADER
 
-' > $NXT_BUILD_DIR/$NXT_PYTHON_MOUNTS_HEADER
+static const nxt_fs_mount_t  nxt_python_mounts[] = {
+{(u_char *) "/usr/lib/python\${PYTHON3_VERSION_MAJOR}", (u_char *) "/usr/lib/python\${PYTHON3_VERSION_MAJOR}", NXT_FS_BIND, (u_char *) "bind", 0, NULL, 1, 1},
+{(u_char *) "/root", (u_char *) "/root", NXT_FS_BIND, (u_char *) "bind", 0, NULL, 1, 1},
+{(u_char *) "/usr/lib/python\${PYTHON3_VERSION_MAJOR//.}.zip", (u_char *) "/usr/lib/python\${PYTHON3_VERSION_MAJOR//.}.zip", NXT_FS_BIND, (u_char *) "bind", 0, NULL, 1, 1},
+};
 
+END
 
 $echo " + Python module: ${NXT_PYTHON_MODULE}.unit.so"
 
